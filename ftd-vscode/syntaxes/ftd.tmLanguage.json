{
  "name": "ftd",
  "scopeName": "source.ftd",
  "fileTypes": ["ftd"],
  "patterns": [
    { "include": "#comment" },
    { "include": "#style-block" },
    { "include": "#node-declaration" },
    { "include": "#constraint-line" },
    { "include": "#property" },
    { "include": "#string" },
    { "include": "#hex-color" },
    { "include": "#number" },
    { "include": "#node-id" },
    { "include": "#keywords" }
  ],
  "repository": {
    "comment": {
      "match": "^\\s*#.*$",
      "name": "comment.line.number-sign.ftd"
    },
    "style-block": {
      "begin": "\\b(style)\\s+(\\w+)\\s*\\{",
      "beginCaptures": {
        "1": { "name": "keyword.declaration.style.ftd" },
        "2": { "name": "entity.name.type.style.ftd" }
      },
      "end": "\\}",
      "patterns": [
        { "include": "#comment" },
        { "include": "#property" },
        { "include": "#hex-color" },
        { "include": "#string" },
        { "include": "#number" }
      ]
    },
    "node-declaration": {
      "match": "\\b(group|rect|ellipse|path|text)\\b",
      "name": "keyword.declaration.node.ftd"
    },
    "constraint-line": {
      "match": "(@\\w+)\\s*(->)",
      "captures": {
        "1": { "name": "variable.other.node-id.ftd" },
        "2": { "name": "keyword.operator.constraint-arrow.ftd" }
      }
    },
    "property": {
      "match": "\\b(w|h|x|y|fill|stroke|font|corner|opacity|shadow|bg|layout|use|center_in|offset|gap|pad|scale|rotate|translate|ease|duration|cols)\\s*:",
      "captures": {
        "1": { "name": "support.type.property-name.ftd" }
      }
    },
    "node-id": {
      "match": "@\\w+",
      "name": "variable.other.node-id.ftd"
    },
    "hex-color": {
      "match": "#[0-9A-Fa-f]{3,8}\\b",
      "name": "constant.other.color.hex.ftd"
    },
    "string": {
      "begin": "\"",
      "end": "\"",
      "name": "string.quoted.double.ftd"
    },
    "number": {
      "match": "\\b\\d+(\\.\\d+)?\\b",
      "name": "constant.numeric.ftd"
    },
    "keywords": {
      "match": "\\b(anim|column|row|grid|free|spring|linear|ease_in|ease_out|ease_in_out|canvas)\\b",
      "name": "keyword.other.ftd"
    }
  }
}
